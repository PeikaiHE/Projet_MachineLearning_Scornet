# Projet_MachineLearning 
**E.Scornet**

- Kaggle 链接: https://www.kaggle.com/competitions/optiver-trading-at-the-close
- Overleaf 链接：https://www.overleaf.com/8326179925tkwfmcgpythz#a0551b

## 任务分配？
- 任务1: 数据预处理，数据可视化，
- 任务2: 特征工程
- 任务3: 模型训练，模型融合

## Columns description

`stock_id`': A unique identifier for the stock. 

`date_id`: A unique identifier for the date.

`seconds_in_bucket`: 意思是从当日收盘竞价开始计算，经过的秒数。其中，“always starting from 0”表示每天开始的时候，这个数值都会从0开始计算。 \
收盘竞价（closing auction）是股票交易日结束时的一段特定时间，期间集中处理所有待成交的订单以确定最后的收盘价格。这段时间的开始和结束由各交易所的规定来确定。 \
在这种情境中，“seconds_in_bucket”提供了一个时间戳，帮助投资者或分析师了解在收盘竞价过程中，特定事件发生的具体时间。例如，这可以用于分析在收盘竞价期间价格、交易量等变化的精确时点。 

`imbalance_size`: 通常是指在一个特定的参考价格上，买卖订单之间尚未匹配的数量。简而言之，这是指在当前价格下尚未完成的买卖订单的数量。 \
为了更加具体，考虑一个简单的例子：假设某个股票的当前参考价格是$100，有5股的买单想要以$100购买，而有8股的卖单想要以$100出售。在这种情况下，“The amount unmatched at the current reference price”将是3股，因为有8股的卖单和5股的买单相匹配，还剩下3股的卖单没有与买单匹配。 \
这种信息对于了解市场深度和流动性是有用的，可以帮助投资者预测价格可能的走势和市场的供需关系。

`imbalance_buy_sell_flag`: 
*buy-side imbalance; 1*：这意味着在当前的竞价中，买单数量超过了卖单数量，导致了买方不平衡。换句话说，有更多的投资者想要买这支股票，而比较少的投资者想要卖。\
*sell-side imbalance; -1*：这意味着在当前的竞价中，卖单数量超过了买单数量，导致了卖方不平衡。这表示有更多的投资者想要卖这支股票，而比较少的投资者想要买。\
*no imbalance; 0*：这意味着在当前的竞价中，买单和卖单的数量是相等的，没有不平衡存在。\
这个指标在拍卖或股票交易中特别有用，因为它可以帮助投资者和交易员了解市场的供需关系。对于那些在收盘或开盘竞价时交易的投资者来说，了解不平衡方向可能有助于他们做出更明智的交易决策。

`reference_price`:是一个用于竞价拍卖中的关键概念，尤其是在开盘和收盘时的交易竞价。它的定义如下：\
*最大化配对股份的价格*：这是指在某个价格点上，买卖双方的订单数量可以达到最大的匹配量。\
*最小化不平衡*：在同一个价格点上，未匹配的订单数量（即买单和卖单的差异）是最小的。\
*最小化与买卖中点的距离*：这个价格应当尽量接近当前的买卖价差的中点，也就是买价和卖价的平均值。\
整体上，这三个条件确保了参考价格反映了市场的真实需求和供给关系，并且尽量接近市场的现行价格。\
最后的描述：“也可以被认为是等于最接近的价格，但受到最佳买价和卖价的限制。” 意味着这个参考价格不会低于当前市场上的最高买价或高于最低卖价。简单地说，它位于当前的最高买价和最低卖价之间。\
这个参考价格为交易所提供了一个公平、透明的价格点，用于在竞价拍卖中匹配买卖订单。对于投资者来说，了解这个价格可以帮助他们判断市场的动向和可能的开盘或收盘价格。

`matched_size`: 简单来说，如果你考虑股票市场上的买卖订单，有时会有多个买单和卖单希望在相同或相似的价格上进行交易。当这些订单的价格相互匹配时，这些订单就可以成交。\
例如，假设当前参考价格是$100，并且有以下订单：\
买单：10股，价格$100 \
买单：5股，价格$100 \
卖单：12股，价格$100 \
卖单：3股，价格$100\
在这种情况下，可以匹配的总数量是10 + 5 = 15股买单和12 + 3 = 15股卖单。因此，matched_size 将是15股 * $100 = $1500。\
所以，matched_size 告诉你在当前的参考价格下，能够成功交易的总金额是多少（以美元计算）。这可以为投资者提供关于市场流动性和交易深度的信息。

`far_price`:
**crossing price**：交叉价格。它是买卖双方同意的价格，即在这个价格上，买方的出价和卖方的要价相交或相匹配。\
**maximize the number of shares matched based on auction interest only**：这意味着far_price是基于仅仅拍卖中的兴趣（即提交的拍卖订单）来计算的，其目的是使得能够匹配的股份数量最大化。\
**excludes continuous market orders**：这意味着在计算far_price时，不考虑连续市场订单。连续市场订单通常是那些在普通交易时段内提交、即时执行的订单。相比之下，拍卖订单是在特定的开盘或收盘竞价期间提交的订单，它们在竞价结束时才会被执行。\
总之，`far_price` 是一个基于拍卖订单的计算结果，其目的是确定一个交叉价格，使得在此价格下可以匹配的股份数量最大化，同时忽略连续市场订单。这为投资者提供了一个在拍卖中可能的交易价格，帮助他们做出更明智的交易决策。

`near_price`: 
**crossing price**：交叉价格。这是指在某个价格点，买方的出价和卖方的要价相遇或匹配的价格。\
**maximize the number of shares matched based on auction and continuous market orders**：这意味着near_price的计算考虑了拍卖中的订单以及连续市场的订单。其目的是确定一个价格，在这个价格下，基于这两种类型的订单，可以匹配的股份数量是最大的。\
与`far_price`不同，`near_price`不仅仅考虑拍卖订单，还考虑了连续市场的订单。连续市场订单是那些在普通交易时段中实时提交和执行的订单。而拍卖订单是针对特定的开盘或收盘竞价时段提交的，只在竞价结束时执行。\
因此，`near_price` 提供了一个更全面的交叉价格，它反映了市场上所有订单的总体兴趣和动态。这为投资者提供了关于可能的交易价格的更全面的视角，有助于他们在拍卖期间做出决策。

`bid_price`: 买方愿意支付的最高价格.\
`ask_price`: 卖方要求的最低价格.\
**most competitive**: 这意味着这些价格是当前市场中最具竞争力的。对于买单来说，最具竞争力的订单自然是出价最高的，因为它超过了其他所有买家的出价。对于卖单，最具竞争力的订单是要价最低的，因为它低于其他所有卖家的报价。\
**non-auction book**: 这是指在常规交易时段中的订单簿，与特定的拍卖时段（如开盘或收盘拍卖）相对。这本订单簿中记录了所有即时的、非拍卖的买卖订单。\
综上所述，`[bid/ask]_price` 在这个上下文中是指在常规交易时段中，买方出价最高或卖方要价最低的订单的价格。这为投资者提供了当前市场的即时买卖价，帮助他们了解市场的实时动态和可能的交易价格。

`bid_size`: 在最具竞争力的买价上的订单总额.\
`ask_size`: 在最具竞争力的卖价上的订单总额.\
**dollar notional amount**: 这是指订单的总金额。例如，如果有一个买单愿意以$100的价格购买10股股票，那么这个买单的美元名义金额就是$1000。\
综上所述，`[bid/ask]_size` 描述的是在常规交易时段中，最具竞争力的买/卖价上的订单的总金额。这为投资者提供了一个关于市场深度和流动性的指标，即在当前的最佳买卖价上，市场上有多少资金正在等待交易。

`wap`:
`wap` 代表 "Weighted Average Price"，即加权平均价格。它是一种在特定时间段内根据交易量或订单大小计算平均交易价格的方法。wap 是针对非拍卖订单簿（non-auction book）的。\
这个公式实际上是一个加权平均，其中买价（BidPrice）和卖价（AskPrice）分别按照其对应的卖方订单大小（AskSize）和买方订单大小（BidSize）进行加权。然后，这两个乘积被加在一起并除以总的订单大小（BidSize和AskSize之和）以获得加权平均价格。\
这种方法的目的是获得一个反映市场买卖双方压力和兴趣的价格。在这种特定的加权平均价格计算中，考虑了最具竞争力的买卖价格及其相关的订单大小，从而为投资者提供了一个在特定时间点上的市场价格参考。

`target`:
**The 60 second future move in the wap of the stock**: 这是指从当前时间点开始，未来60秒内某只股票的wap的变化。\
**less the 60 second future move of the synthetic index**: 这是从当前时间点开始，未来60秒内合成指数wap的变化。这一变化从股票的wap变化中被减去，从而获得了与市场的相对变化。\
这个公式的目的是计算未来60秒内某只股票的wap与合成指数wap的相对变化，并将其转化为基点的形式。简单地说，这个target值表示，相对于市场（代表为合成指数），预期该股票的wap将如何变化。\
为什么要这样计算？在金融竞赛和策略中，投资者和交易员通常不仅关心股票本身的价格变化，还关心它与市场或某个参考指数的相对变化。这有助于他们了解股票的相对表现和潜在的alpha（超额回报）。这个target变量就是为了捕捉这种相对表现。

`time_id`: Appears to be another time-related identifier.\
`row_id`: 是由`data_id`__`seconds_in_bucket`_`stock_id` 组成的